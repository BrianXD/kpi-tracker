# KPI Tracker

KPI Tracker æ˜¯ä¸€å€‹è¼•é‡åŒ–ã€ç›´è¦ºçš„å·¥ä½œè¨˜éŒ„è¿½è¹¤ç³»çµ±ã€‚
å‰ç«¯åŸºæ–¼ **React + TypeScript + Vite** é–‹ç™¼ï¼Œå¾Œç«¯è³‡æ–™åº«ä½¿ç”¨ **Google Sheets** èˆ‡ **Google Apps Script (GAS)** æ­å»ºï¼Œç„¡éœ€é¡å¤–å»ºç½®ä¼ºæœå™¨å³å¯å…è²»é‹è¡Œã€‚

## ç³»çµ±æ¶æ§‹ç†å¿µ

- **å‰ç«¯**ï¼šè² è²¬è¡¨å–®ä»‹é¢ã€è³‡æ–™é©—è­‰ã€KPI å„€è¡¨æ¿åœ–è¡¨å±•ç¤ºã€‚
- **å¾Œç«¯ (GAS)**ï¼šæä¾› RESTful APIï¼Œä¸¦è² è²¬å° Google Sheets é€²è¡Œè®€å¯«æ“ä½œã€‚
- **è³‡æ–™åº« (Google Sheets)**ï¼šå€åˆ†ã€Œç³»çµ±åˆ¥ã€ã€ã€Œå­æ¨¡çµ„ã€ã€ã€Œæå•äººå“¡ã€ã€ã€Œæå•æ–¹å¼ã€ç­‰åŸºç¤é¸é …è¡¨ï¼Œä»¥åŠä¸€æ¬„ã€Œå•é¡Œæ¸…å–®è¨˜éŒ„ã€ç”¨æ–¼å­˜å„²æ‰€æœ‰çš„å·¥ä½œè¨˜éŒ„ã€‚

## ğŸ“ å¿«é€Ÿé–‹å§‹ (æœ¬æ©Ÿéƒ¨ç½²)

1. **å®‰è£ä¾è³´**ï¼š
   è«‹ç¢ºèªæ‚¨å·²å®‰è£ Node.js (å»ºè­° v18 ä»¥ä¸Š)ã€‚
   ```bash
   npm install
   ```

2. **ç’°å¢ƒè®Šæ•¸è¨­å®š**ï¼š
   è«‹å°‡æ ¹ç›®éŒ„çš„ `.env.example` è¤‡è£½ä¸€ä»½ä¸¦å‘½åç‚º `.env`ï¼Œå¡«ä¸Šæ‚¨éƒ¨ç½²å¥½çš„ GAS Web App URLã€‚
   ```env
   VITE_GAS_URL=https://script.google.com/macros/s/æ‚¨çš„ID/exec
   ```

3. **å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨**ï¼š
   ```bash
   npm run dev
   ```
   ç¾åœ¨æ‚¨å¯ä»¥æ‰“é–‹ç€è¦½å™¨é€²å…¥ `http://localhost:5173`ã€‚

## ğŸ“Š å¦‚ä½•è¨­å®š Google Sheets èˆ‡ GAS å¾Œç«¯

ç‚ºäº†è®“å‰å¾Œç«¯èƒ½æ­£å¸¸é€£ç¹«ï¼Œæ‚¨éœ€è¦æº–å‚™å¥½å‰ç«¯æ‰€å°æ‡‰çš„ Google Sheets èˆ‡å°æ‡‰çš„ GAS Codeã€‚

### 1. æº–å‚™ Google Sheets è³‡æ–™è¡¨

è«‹å»ºç«‹ä¸€å€‹å…¨æ–°çš„ Google Sheetsï¼Œä¸¦åœ¨ä¸‹æ–¹å»ºç«‹äº”å€‹å·¥ä½œè¡¨ (Sheet)ï¼Œè«‹**å‹™å¿…å®Œå…¨ç…§æ­¤å‘½å**ï¼š
1. **å•é¡Œæ¸…å–®è¨˜éŒ„**
2. **ç³»çµ±åˆ¥**
3. **å­æ¨¡çµ„**
4. **æå•äººå“¡**
5. **æå•æ–¹å¼**

#### æ¸¬è©¦ç¯„æœ¬è³‡æ–™ (å¯ç›´æ¥è¤‡è£½è²¼ä¸Š)

æ‚¨å¯ä»¥å°‡ä»¥ä¸‹çš„è¡¨æ ¼è¤‡è£½ï¼Œé»é¸ Google Sheets çš„ A1 å„²å­˜æ ¼ï¼Œç„¶å¾Œ **ã€Œè²¼ä¸Šã€**ã€‚

**ã€å•é¡Œæ¸…å–®è¨˜éŒ„ã€‘** (é¦–åˆ—ç‚ºæ¨™é¡Œï¼Œä¸éœ€é è¨­è³‡æ–™)
| id  | systemName | subModuleName | handler | questioner | difficulty | priority | questionDate | questionType | isDone | closedDate | minutes | note |
| --- | ---------- | ------------- | ------- | ---------- | ---------- | -------- | ------------ | ------------ | ------ | ---------- | ------- | ---- |

**ã€ç³»çµ±åˆ¥ã€‘**
| id  | name         | isEnabled | order |
| --- | ------------ | --------- | ----- |
| 1   | é›»å•†ç³»çµ±     | Y         | 1     |
| 2   | å…§éƒ¨ç®¡ç†ç³»çµ± | Y         | 2     |
| 3   | HR ç³»çµ±      | Y         | 3     |

**ã€å­æ¨¡çµ„ã€‘**
| id  | parentSystem | name     | isEnabled | order |
| --- | ------------ | -------- | --------- | ----- |
| 1   | é›»å•†ç³»çµ±     | çµå¸³æ¨¡çµ„ | Y         | 1     |
| 2   | é›»å•†ç³»çµ±     | æœƒå“¡æ¨¡çµ„ | Y         | 2     |
| 3   | å…§éƒ¨ç®¡ç†ç³»çµ± | æ¬Šé™æ§ç®¡ | Y         | 1     |
| 4   | HR ç³»çµ±      | è€ƒå‹¤æ¨¡çµ„ | Y         | 1     |

**ã€æå•äººå“¡ã€‘**
| id  | name   | empId  | isEnabled | order |
| --- | ------ | ------ | --------- | ----- |
| 1   | ç‹å¤§æ˜ | EMP001 | Y         | 1     |
| 2   | æå°è¯ | EMP002 | Y         | 2     |
| 3   | é™³å»ºåœ‹ | EMP003 | Y         | 3     |

**ã€æå•æ–¹å¼ã€‘**
| id  | name  | isEnabled | order |
| --- | ----- | --------- | ----- |
| 1   | LINE  | Y         | 1     |
| 2   | Email | Y         | 2     |
| 3   | é›»è©±  | Y         | 3     |
| 4   | ç¾å ´  | Y         | 4     |

---

### 2. éƒ¨ç½² Google Apps Script

1. åœ¨è©² Google Sheets ä¸­ï¼Œé»æ“Šä¸Šæ–¹é¸å–®çš„ **ã€Œæ“´å……åŠŸèƒ½ã€ -> ã€ŒApps Scriptã€**ã€‚
2. å°‡å°ˆæ¡ˆä¸­çš„ `gas/Code.gs` æª”æ¡ˆå…§å®¹ï¼Œå®Œå…¨è¤‡è£½ä¸¦å–ä»£ç·¨è¼¯å™¨ä¸­çš„ç¨‹å¼ç¢¼ã€‚
3. é»æ“Šä¸Šæ–¹çš„ **ã€Œéƒ¨ç½²ã€ -> ã€Œæ–°å¢éƒ¨ç½²ä½œæ¥­ã€**ã€‚
4. é¸æ“‡é¡å‹ï¼š**ç¶²é æ‡‰ç”¨ç¨‹å¼ (Web App)**ã€‚
5. **åŸ·è¡Œèº«åˆ†**ï¼šé¸æ“‡ã€Œæˆ‘ã€ã€‚
6. **èª°å¯ä»¥å­˜å–**ï¼šé¸æ“‡ã€Œæ‰€æœ‰äººã€ã€‚
7. é»æ“Šã€Œéƒ¨ç½²ã€å¾Œï¼Œæ‚¨æœƒç²å¾—ä¸€ä¸² **ç¶²é æ‡‰ç”¨ç¨‹å¼ç¶²å€ (URL)**ï¼Œè«‹å°‡æ­¤ URL è¤‡è£½ä¸¦è²¼è‡³å‰ç«¯å°ˆæ¡ˆçš„ `.env` ä¸­ (`VITE_GAS_URL=...`)ã€‚

> **ğŸ’¡ é‡è¦æç¤º**ï¼šæ—¥å¾Œå¦‚æœæ‚¨æœ‰æ›´æ–° `Code.gs`ï¼Œè«‹å‹™å¿…æŒ‰ç…§ä¸Šè¿°æ­¥é©Ÿå†æ¬¡é¸æ“‡ã€Œæ–°å¢éƒ¨ç½²ä½œæ¥­ã€ä¸¦å–å¾—æ–°çš„ URLï¼ˆæˆ–è€…åœ¨ç®¡ç†éƒ¨ç½²ä½œæ¥­ä¸­ç·¨è¼¯ä¸¦å»ºç«‹ã€Œæ–°ç‰ˆæœ¬ã€ï¼‰ï¼Œå¦å‰‡æ”¹å‹•ä¸æœƒç”Ÿæ•ˆã€‚

## ğŸš€ GitHub Actions è‡ªå‹•éƒ¨ç½²è‡³ GitHub Pages

å°ˆæ¡ˆå…§å·²åŒ…å« `.github/workflows/deploy.yml` è…³æœ¬ï¼Œå¯å°‡éœæ…‹ç¶²é è‡ªå‹•å»ºç½®ä¸¦éƒ¨ç½²è‡³ GitHub Pagesã€‚
å¦‚æœæ‚¨å·²å°‡æ­¤å°ˆæ¡ˆæ¨æ’­åˆ°è‡ªå·±çš„ GitHub Repositoryï¼Œè«‹ä¾ç…§ä»¥ä¸‹æ­¥é©Ÿè¨­å®šï¼š

### 1. è¨­å®š Repository Secrets

ç‚ºäº†å®‰å…¨åœ°å¸¶å…¥ GAS Web App URLï¼Œæ‚¨éœ€è¦åœ¨ GitHub ä¸Šè¨­å®š Secretï¼š
1. é€²å…¥æ‚¨çš„ Repository é é¢ï¼Œé»é¸ **Settings**ã€‚
2. åœ¨å·¦å´é¸å–®é¸æ“‡ **Secrets and variables -> Actions**ã€‚
3. é»æ“Š **New repository secret**ã€‚
4. **Name** å¡«å…¥ï¼š`VITE_GAS_URL`
5. **Secret** å¡«å…¥ï¼šå‰›å‰›å–å¾—çš„ GAS Web App URLï¼ˆä¾‹å¦‚ `https://script.google.com/macros/s/.../exec`ï¼‰ã€‚
6. é»æ“Š Add secret å„²å­˜ã€‚

### 2. å•Ÿå‹• GitHub Pages ç’°å¢ƒ

1. å›åˆ°å°ˆæ¡ˆçš„ **Settings**ï¼Œåœ¨å·¦å´é¸å–®é¸æ“‡ **Pages**ã€‚
2. åœ¨ **Build and deployment** å€å¡Šï¼Œå°‡ **Source** æ”¹ç‚º **GitHub Actions**ã€‚
3. æ¥ä¸‹ä¾†åªè¦æ‚¨æŠŠç¨‹å¼ç¢¼ Push åˆ° `main` åˆ†æ”¯ï¼ˆæˆ–åœ¨ Actions é é¢æ‰‹å‹•è§¸ç™¼ï¼‰ï¼ŒGitHub Actions å°±æœƒè‡ªå‹•ç·¨è­¯å°ˆæ¡ˆï¼Œä¸¦ç™¼å¸ƒåˆ° Github Pagesï¼

> **âš ï¸ GitHub Pages çš„æ³¨æ„äº‹é …**ï¼š
> å¦‚æœæ‚¨ä¸æ˜¯éƒ¨ç½²åœ¨ username.github.io çš„æ ¹ç›®éŒ„ï¼Œè€Œæ˜¯éƒ¨ç½²åœ¨ç‰¹å®šçš„å„²å­˜åº«åº•ä¸‹ï¼ˆå¦‚ username.github.io/my-repo-nameï¼‰ï¼Œæ‚¨å¯èƒ½æœƒéœ€è¦å» `vite.config.ts` è¨­å®š `base: '/my-repo-name/'`ï¼Œä»¥ç¢ºä¿ GitHub Pages èƒ½æ­£ç¢ºè¼‰å…¥å°æ‡‰çš„ JS/CSS éœæ…‹æª”ã€‚
